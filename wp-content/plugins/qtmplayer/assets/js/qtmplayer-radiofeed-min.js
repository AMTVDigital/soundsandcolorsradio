!function(e){"use strict";e.qtmplayerRadioFeedObj={body:e("body"),window:e(window),document:e(document),htmlAndbody:e("html,body"),qtFeedData:{},timeInterval:3e4,fn:{cachedThumbsArray:[],getThumbnail:function(t,a,o){var r,n="https://itunes.apple.com/search?term="+(a=a.split(" - ").join("-").split(" ").join("+"));void 0===t.cachedThumbsArray[a]?e.ajax({type:"GET",cache:!0,url:n,async:!0,dataType:"jsonp",context:this,success:function(e){if("object"!=typeof e&&(e=JSON.parse(e)),e.resultCount>0)return r=e.results[0].artworkUrl100,t.cachedThumbsArray[a]=r,void o(r)}}):o(t.cachedThumbsArray[a])},marqueeInstances:[],marqueeText:function(t){if("function"==typeof e.fn.marquee){var a=e("body").find(".proradio-marquee");if(t.marqueeInstances.length>0){for(var o=0;o<t.marqueeInstances.length;o++)void 0!==t.marqueeInstances[o]&&t.marqueeInstances[o].marquee("destroy");t.marqueeInstances=[]}e.each(a,(function(a,o){var r=e(o);0===r.find(".marquee").length&&r.html('<span class="marquee">'+r.html()+"</span>"),r.outerWidth()>r.find(".marquee").outerWidth()||(t.marqueeInstances[a]=r.marquee({duration:12e3,gap:r.outerWidth(),delayBeforeStart:1e3,direction:"left",duplicated:!1,pauseOnCycle:5e3,startVisible:!0}))}))}},qtApplyTitle:function(t,a){if(t&&""!==t){var o,r,n=t.split("-");n.length>1?(o=n[0],r=n[1]):(o="",r=t);var i=o.split("[");i.length>1&&(o=i[0]);var c=r.split("[");c.length>1&&(r=c[0]),r=e.trim(r),o=e.trim(o),e(".qtmplayer-feed").show(),e(".qtmplayer__title").html(r),e(".qtmplayer__artist").html(o),this.marqueeText(this);var s=o+"-"+r;a&&this.getThumbnail(this,s,a)}else e(".qtmplayer-feed").hide()},newFeedReading:function(){var t=e.qtmplayerRadioFeedObj,a=t.qtFeedData,o=a.callBack,r=t.fn,n=void 0!==a.host?a.host:"",i=void 0!==a.port?a.port:"",c=void 0!==a.protocol?a.protocol:"http",s=void 0!==a.channel?a.channel:"",l=void 0!==a.icecasturl?a.icecasturl:"",p=void 0!==a.icecastmountpoint?a.icecastmountpoint:"",d=void 0!==a.icecastchannel?a.icecastchannel:"",u=void 0!==a.radiodotco?a.radiodotco:"",y=void 0!==a.airtime?a.airtime:"",h=void 0!==a.radionomy?a.radionomy:"",f=void 0!==a.textfeed?a.textfeed:"",m=void 0!==a.useproxy?a.useproxy:"",q=void 0!==a.live365?a.live365:"";e("#qtFeedPlayerTrack"),e("#qtFeedPlayerAuthor"),e("#qtPlayerTrackInfo");t=e.qtmplayerRadioFeedObj;var v=e("#qtmplayer-radiofeed-proxyurl").data("proxyurl");if("type-auto"!=a.servertype)if(""!==f||""!==h||""!==q||""!==y||""!==n&&""!==i&&void 0!==n||""!==l||""!==u)if(""!==q){if(q="https://api.live365.com/station/"+q,m)q=v+"?qtproxycall="+q;e.ajax({type:"GET",cache:!1,url:q,async:!0,success:function(e){b=JSON.parse(e),r.qtApplyTitle(b["current-track"].artist+" - "+b["current-track"].title,o)},error:function(e){}})}else if(""!==f){var T,j;m?(T=e("#qtmplayer-radiofeed-proxyurl").data("proxyurl"),j={qtproxycall:f}):T=f,e.ajax({type:"GET",cache:!1,url:T,async:!0,data:j,dataType:"html",success:function(e){r.qtApplyTitle(e,o)},error:function(e){console.log(e)}})}else if(""!==h)e.ajax({type:"GET",url:h,async:!0,cache:!1,dataType:"xml",success:function(t){r.qtApplyTitle(e(t).find("artists").html()+" - "+e(t).find("title").html())},error:function(e){console.log(e)}});else if(""!==y&&"undefined"!==y&&void 0!==y&&void 0!==y){var b;e.ajax({type:"GET",cache:!1,url:v,async:!0,data:{qtproxycall:y},contentType:"application/json",success:function(e){b=JSON.parse(e),F=b.tracks.current.name,r.qtApplyTitle(F)},error:function(e){}})}else if(""!==l&&void 0!==l){var x,F,g,A=l;m&&(A=v,g={qtproxycall:l}),e.ajax({type:"GET",cache:!1,url:A,async:!0,jsonpCallback:"parseMusic",jsonp:!1,data:g,contentType:"application/json",success:function(e){"object"!=typeof e&&(e=JSON.parse(e)),void 0!==(x=e.icestats.source)&&(p&&(x=x[p]),d&&(console.log("set source to 0"),x=x[d]),d||void 0!==x.title||(x=x[0]),F=x.title,x.artist&&(F=F+" - "+x.artist),r.qtApplyTitle(F,o))}})}else{if(""!==n&&""!==i&&void 0!==n){var I={shoutcast_host:n,shoutcast_port:i,shoutcast_protocol:c,shoutcast_channel:s},O=I.shoutcast_channel||1,_="http";"443"!==I.shoutcast_port&&"https"!==I.shoutcast_protocol||(_="https");var R=_+"://"+I.shoutcast_host+":"+I.shoutcast_port+"/stats?sid="+O+"&json=1";A=R;return m&&(A=v,g={qtproxycall:R}),void e.ajax({type:"GET",cache:!1,url:A,async:!0,data:g,contentType:"application/json",success:function(e){"object"!=typeof e&&(e=JSON.parse(e)),r.qtApplyTitle(e.songtitle,o)},error:function(e){console.log(A),console.log(e)}})}if(""!==u&&void 0!==u){var k="https://public.radio.co/stations/"+u+"/status";e.ajax({type:"GET",cache:!1,url:k,async:!0,contentType:"application/json",success:function(e){F=e.current_track.title,r.qtApplyTitle(F,o)},error:function(e){}})}}else r.qtApplyTitle();else e.ajax({type:"GET",url:v,jsonpCallback:"parseMusic",async:!0,cache:!1,data:{qtproxycall:a.file,icymetadata:"1"},success:function(e){r.qtApplyTitle(e,o)}})},feedInterval:null,stopFeed:function(){e.qtmplayerRadioFeedObj;void 0!==e.qtmplayerRadioFeedObj.fn.qtFeedInterval&&clearInterval(e.qtmplayerRadioFeedObj.fn.qtFeedInterval)},pushFeed:function(t){var a=e.qtmplayerRadioFeedObj;a.qtFeedData=t,a.fn.stopFeed(),a.fn.newFeedReading(),e.qtmplayerRadioFeedObj.fn.qtFeedInterval=setInterval((function(){a.fn.newFeedReading()}),e.qtmplayerRadioFeedObj.timeInterval)}}},e(document).ready((function(){e.qtmplayerRadioFeedObj.fn.qtApplyTitle()}))}(jQuery);
//# sourceMappingURL=qtmplayer-radiofeed-min.js.map