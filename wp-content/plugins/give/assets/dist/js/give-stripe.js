!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=498)}({10:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},498:function(e,t,r){e.exports=r(887)},8:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},887:function(e,t,r){"use strict";r.r(t);var n=r(8),i=r.n(n),a=r(10),l=r.n(a),o=function(){function e(t){i()(this,e),t&&(this.formElement=t,this.publishableKey=t.getAttribute("data-publishable-key"),this.accountId=t.getAttribute("data-account")?t.getAttribute("data-account"):"",this.idPrefix=t.getAttribute("data-id")?t.getAttribute("data-id"):"",this.locale=give_stripe_vars.preferred_locale,this.fieldsFormat=give_stripe_vars.cc_fields_format,this.isMounted=!1,this.fontStyles=[],0!==Object.keys(give_stripe_vars.element_font_styles).length&&this.fontStyles.push(give_stripe_vars.element_font_styles))}return l()(e,[{key:"setupStripeElement",value:function(){var e={};return 0!==this.accountId.trim().length&&(e={stripeAccount:this.accountId}),Stripe(this.publishableKey,e)}},{key:"getElements",value:function(e){var t={locale:this.locale};return this.fontStyles.length>0&&(t={fonts:this.fontStyles,locale:this.locale}),e.elements(t)}},{key:"createElement",value:function(e,t){var r=[],n=this.getElementsToMountOn(),i={style:this.getElementStyles(),classes:this.getElementClasses()};return n.forEach((function(t,n){"card"===t[0]?i.hidePostalCode=!!give_stripe_vars.checkout_address:"cardNumber"===t[0]?i.placeholder=give_stripe_vars.card_number_placeholder_text:"cardCvc"===t[0]?i.placeholder=give_stripe_vars.card_cvc_placeholder_text:delete i.placeholder,r.push(e.create(t[0],i))})),"cardNumber"===n[0][0]&&r[0].addEventListener("change",(function(e){var r="diners"===e.brand?"dinersclub":e.brand;t.querySelector(".card-type").className="card-type "+r})),r}},{key:"destroyElement",value:function(e){e.forEach((function(e,t){e.destroy()}))}},{key:"getElementStyles",value:function(){return{base:give_stripe_vars.element_base_styles,complete:give_stripe_vars.element_complete_styles,empty:give_stripe_vars.element_empty_styles,invalid:give_stripe_vars.element_invalid_styles}}},{key:"getElementClasses",value:function(){return{focus:"focus",empty:"empty",invalid:"invalid"}}},{key:"getElementsToMountOn",value:function(){var e={cardNumber:"#give-card-number-field-".concat(this.idPrefix),cardCvc:"#give-card-cvc-field-".concat(this.idPrefix),cardExpiry:"#give-card-expiration-field-".concat(this.idPrefix)};return"single"===this.fieldsFormat&&(e={card:"#give-stripe-single-cc-fields-".concat(this.idPrefix)}),Object.entries(e)}},{key:"mountElement",value:function(e){var t=this.getElementsToMountOn();Array.from(e).forEach((function(e,r){e.mount(t[r][1])}))}},{key:"unMountElement",value:function(e){var t=this.getElementsToMountOn();Array.from(e).forEach((function(e,r){e.unmount(t[r][1])}))}},{key:"createPaymentMethod",value:function(e,t,r){var n={};if(n.name=e.querySelector('input[name="card_name"]').value,!give_stripe_vars.stripe_card_update){var i=e.querySelector('input[name="give_first"]').value,a=e.querySelector('input[name="give_last"]').value,l=e.querySelector('input[name="give_email"]').value;n.name="".concat(i," ").concat(a),n.email=l,e.querySelector("[id^=give-purchase-button]").setAttribute("disabled","disabled")}if(give_stripe_vars.checkout_address&&!give_stripe_vars.stripe_card_update){var o=e.querySelector(".card-address").value,u=e.querySelector(".card-address-2").value,c=e.querySelector(".card-city").value,s=e.querySelector(".card_state").value,d=e.querySelector(".card-zip").value,v=e.querySelector(".billing-country").value;n.address={line1:o||"",line2:u||"",city:c||"",state:s||"",postal_code:d||"",country:v||""}}t.createPaymentMethod({type:"card",card:r[0],billing_details:n}).then((function(t){if(t.error){var r=jQuery(e),n='<div class="give_errors"><p class="give_error">'.concat(t.error.message,"</p></div>"),i=e.getAttribute("data-id");return Give.form.fn.resetDonationButton(r),void(e.querySelector("#give-stripe-payment-errors-".concat(i)).innerHTML=n)}e.querySelector('input[name="give_stripe_payment_method"]').value=t.paymentMethod.id,e.submit()}))}},{key:"triggerStripeModal",value:function(e,t,r,n){var i=e.querySelector('input[name="give-form-id-prefix"]'),a=e.querySelector("#give-stripe-checkout-modal-donate-button-".concat(i.value)),l=e.querySelector('input[name="card_name"]'),o={};n.forEach((function(e){o.cardName=!1,e.addEventListener("ready",(function(e){o[e.elementType]=!1,o.cardName="card"===e.elementType})),e.addEventListener("change",(function(e){o[e.elementType]=e.complete,Object.values(o).every((function(e){return!0===e}))?a.removeAttribute("disabled"):a.setAttribute("disabled","disabled")}))})),null!==l&&l.addEventListener("keyup",(function(e){o.cardName=""!==e.target.value,Object.values(o).every((function(e){return!0===e}))?a.removeAttribute("disabled"):a.setAttribute("disabled","disabled")})),null!==a&&a.addEventListener("click",(function(i){var l=i.target,o=l.nextElementSibling;a.getAttribute("data-is_legacy_form")?(l.value=give_global_vars.purchase_loading,o.style.display="inline-block"):(l.value="",o.classList.add("sequoia-loader"),o.classList.add("spinning"),o.classList.remove("give-loading-animation")),t.createPaymentMethod(e,r,n),i.preventDefault()}))}}]),e}();document.addEventListener("DOMContentLoaded",(function(e){Array.from(document.querySelectorAll(".give-form-wrap")).forEach((function(e){var t=e.querySelector(".give-form");if(null!==t&&t.getAttribute("data-publishable-key")){var r=t.querySelector('input[name="give-gateway"]'),n=give_stripe_vars.hasOwnProperty("stripe_card_update")&&parseInt(give_stripe_vars.stripe_card_update),i=t.querySelector('input[name="give-form-id-prefix"]'),a=new o(t),l=a.setupStripeElement(),u=a.getElements(l),c=Give.form.fn.getInfo("stripe-checkout-type"),s=r?r.value:"",d=c&&"modal"===c.value,v=r&&"stripe_checkout"===s&&d,p=a.createElement(u,t);(n||"stripe"===s||v)&&a.mountElement(p),document.addEventListener("give_gateway_loaded",(function(e){var r=e.detail.selectedGateway,n=a.getElements(l);p=a.createElement(n,t),"stripe"===r||v?a.mountElement(p):a.unMountElement(p),v&&a.triggerStripeModal(t,a,l,p)})),v&&a.triggerStripeModal(t,a,l,p),t.onsubmit=function(e){if((n||"stripe"===s)&&(a.createPaymentMethod(t,l,p),e.preventDefault()),v){var r=t.querySelector(".give-stripe-checkout-modal"),o=r.querySelector(".give-stripe-checkout-donation-amount"),u=r.querySelector(".give-stripe-checkout-donor-email"),c=t.querySelector(".give-final-total-amount").textContent,d=t.querySelector('input[name="give_email"]').value,m=t.querySelector('input[name="give_validate_stripe_payment_fields"]');r.classList.add("give-stripe-checkout-show-modal"),null!==o&&(o.innerHTML=c),null!==u&&(u.innerHTML=d),m.setAttribute("value","1");var f=t.querySelector(".give-stripe-checkout-modal-close");null!==f&&f.addEventListener("click",(function(e){t.querySelector("#give-stripe-checkout-modal-".concat(i.value)).classList.remove("give-stripe-checkout-show-modal");var r=t.querySelector(".give-submit");null!==r&&(r.value=r.getAttribute("data-before-validation-label"),r.nextElementSibling.style.display="none",r.removeAttribute("disabled"),t.querySelector('input[name="give_validate_stripe_payment_fields"]').setAttribute("value","0")),e.preventDefault()})),e.preventDefault()}}}}))}))}});